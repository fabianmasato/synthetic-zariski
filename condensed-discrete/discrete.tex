\section{Weakly discrete types}

There is a tower:
\[N_0 \leftarrow N_1 \leftarrow N_2 \leftarrow \cdots\]
where $N_k = \mathrm{Fin(k+1)}$ the map $N_{k+1}\to N_k$ sends $k$ to $k-1$ and is the identity on other element. Then:
\[\mathrm{lim}_kN_k = \Noo\]

\begin{definition}
A type $X$ is called weakly discrete if the canonical map:
\[\mathrm{colim}_kX^{N_k} \to X^{\Noo}\]
is an equivalence.
\end{definition}

Discrete clearly implies weakly discrete. We look at truncated types:

\begin{lemma}\label{proposition-weakly-discrete}
Any proposition is weakly discrete.
\end{lemma}

\begin{proof}
As $\Noo$ and $N_k$ are all inhabited.
\end{proof}

\begin{lemma}\label{weakly-discrete-sets}
If $X$ is a set, $X$ is discrete if and only if every convergent sequence in $X$ is eventually constant, or equivalently if any map $\Noo\to X$ merely factor through a finite set.
\end{lemma}

\begin{proof}
If $X$ is a set, the map:
\[\mathrm{colim}_kX^{N_k} \to X^{\Noo}\]
is always an embedding, and the conditions precisely means it is surjective.
\end{proof}

\begin{remark}
Presumably, we have that $X$ truncated is weakly discrete if and only if a map from $\Noo$ to any iterated identity type of $X$ is eventually constant.
\end{remark}

\begin{lemma}
Weakly discrete types are stable under $\Sigma$-types and identity types.
\end{lemma}

\begin{proof}
By commutation of sequential colimits with $\Sigma$-types and identity types.
\end{proof}

\begin{lemma}
Any type with open identity types is weakly discrete.
\end{lemma}

\begin{proof}
Let $X$ have open identity types. By \Cref{weakly-discrete-sets} it is enough to show any map $f:\Noo\to X$ is eventually constant. By $f^{-1}(\infty)$ is an open in $\Noo$ containing $\infty$, therefore it contains a decidable in $\Noo$ cointaining $\infty$, therefore it contains all natural numbers but finitely many.
\end{proof}


\section{Discrete types}

\begin{definition}
A type $X$ is called discrete given any tower $(S_k)_{k:\N}$ of finite types, the canonical map:
\[\mathrm{colim}_kX^{S_k} \to X^{\mathrm{lim}_kS_k}\]
is an equivalence.
\end{definition}

\begin{lemma}\label{proposition-discrete}
If $P$ is a proposition the following are equivalent:
\begin{enumerate}[(i)]
\item $P$ is discrete.
\item For all $(D_k)_{k:\N}$ decidable propositions:
\[((\forall_kD_k)\to P) \leftrightarrow \exists_k(D_k\to P)\]
\item For all $C$ closed proposition:
\[P^C \leftrightarrow \neg C\lor P\]
\end{enumerate}
\end{lemma}

\begin{proof}
(i) $\to$ (ii). Clear.

(ii) $\to$ (i). Assume $(S_k)_{k:\N}$ a tower of finite type with $S=\mathrm{lim}_kS_k$. Then:
\[P^S = P^{\propTrunc{S}} = P^{\forall_{k}\propTrunc{S_k}} = \exists_{k} P^{\propTrunc{S_k}} = \exists_{k} P^{S_k} = \mathrm{colim}_kP^{S_k}\]
where the key step $\propTrunc{S} = \forall_{k:\N}\propTrunc{S_k}$ comes from Scott-continuity.

(ii) $\leftrightarrow$ (iii). Any $P$ closed there are $(D_k)_{k:\N}$ decidable such that $P = \forall_kD_k$. Then:
\[\exists_k P^{D_k} = \exists_k (\neg D_k\lor P) = (\exists_k\neg D_k)\lor P = \neg (\forall_kD_k)\lor P\] 
\end{proof}

By \Cref{proposition-weakly-discrete} we know that weakly discrete and discrete do not mean the same.

\begin{corollary}
Any open proposition is discrete.
\end{corollary}

\begin{lemma}\label{set-discrete}
If $X$ is a set, $X$ is discrete if and only if its identity types are discrete, and for all $S:\Stone$ any map $S\to X$ merely factor through a finite type.
\end{lemma}

\begin{proof}
Consider $(S_n)$ a tower of finite type,  by \Cref{discrete-identity-embedding} the map:
\[\mathrm{colim}_kX^{S_k} \to X^{\mathrm{lim}_kS_k}\]
is an embedding, and the factorisation implies it is surjective.
\end{proof}

\begin{lemma}
Discrete types are stable under $\Sigma$-types and identity types.
\end{lemma}

\begin{proof}
By commutation of sequential colimits with $\Sigma$-types and identity types.
\end{proof}

\begin{lemma}
Any overtly discrete type is discrete.
\end{lemma}

\begin{proof}
This is a special case of Scott continuity.
\end{proof}

\begin{lemma}
Given any overtly discrete abelian group $A$, the type $BA$ is discrete.
\end{lemma}

\begin{proof}
TODO \rednote{Maybe $A$ discrete is enough?}
\end{proof}


\subsection{Discrete sets}

\begin{lemma}\label{factorisation-suspension-discrete}
\rednote{Obsolete, replaced by \Cref{factorisation-finite-discrete-quotient}.}
Assume $C:\CHaus$ and $P$ a discrete proposition, any map:
\[C\to \Sigma(P)\]
merely factor through $2$. 
\end{lemma}

\begin{proof}
By local choice we get:
\begin{center}
\begin{tikzcd}
S\ar[r,"i"]\ar[d,"p"] & 2\ar[d] \\
C\ar[r] & \Sigma(P)\\
\end{tikzcd}
\end{center}
Consider the Stone space $T = \Sigma_{x,y:S'}p(x)=p(y)\land i(x)\not=i(y)$. Then $T\to P$ so that by \Cref{proposition-discrete} we have that $\neg T\lor P$. If $P$ then we can conclude, if $\neg T$ then for all $x,y:S$, if $p(x)=p(y)$ then $i(x)=i(y)$ so that there is $j:S\to 2$ such that $j\circ p=i$. We have that the map $C\to \Sigma(P)$ factors through $j$ by surjectivity of $p$. 
\end{proof}

\begin{corollary}
Let $P$ be a discrete proposition, then the suspension of $P$ is discrete.
\end{corollary}

\begin{proof}
By \Cref{set-discrete} and \Cref{factorisation-suspension-discrete}.
\end{proof}

\begin{lemma}\label{factorisation-finite-discrete-quotient}
Assume $C:\CHaus$, $k:\N$ and $\sim$ a discrete equivalence relation on $\mathrm{Fin}(k)$, then any map
\[C\to \mathrm{Fin}(k)/\sim\]
merely factor a finite type.
\end{lemma}

\begin{proof}
We proceed by induction on $k$. If $k\leq 1$ it is clear. By local choice we get:
\begin{center}
\begin{tikzcd}
S\ar[r,"i"]\ar[d,"p"] & \mathrm{Fin}(k)\ar[d] \\
C\ar[r] & \mathrm{Fin}(k)/\sim\\
\end{tikzcd}
\end{center}
For all $l,l'<k$, consider the Stone space:
\[T_{l,l'} = \Sigma_{x,y:S'}p(x)=p(y)\land i(x) = l \land i(y) = l'\] 
Then $T_{l,l'}\to l\sim l'$ so that by \Cref{proposition-discrete} we have that $\neg T_{l,l'}\lor l\sim l'$. If for all $l\not=l'$ we have $\neg T_{l,l'}$, then for all $x,y:S$, if $p(x)=p(y)$ then $i(x)=i(y)$ so that there is $j:S\to \mathrm{Fin}(k)$ such that $j\circ p=i$. To check that $j$ is the desired factorisation we use that $p$ is surjective, and that identity types in $Y$ are proposition. Otherwise there exists $l\not=l'$ such that $l\sim l'$ and we can conclude by induction.
\end{proof}

\begin{corollary}
Let $\sim$ a discrete equivalence relation $\mathrm{Fin}(k)$. Then $\mathrm{Fin}(k)/\sim$ is discrete.
\end{corollary}

\begin{proof}
By \Cref{set-discrete} and \Cref{factorisation-finite-discrete-quotient}.
\end{proof}

\begin{lemma}\label{compact-hausdorff-discrete-quotient-finite-factorisation}
Assume $C:\CHaus$ and $X$ is a discrete set. Any map:
\[C\to X\]
merely factor through a finite type. 
\end{lemma}

\begin{proof}
Consider a surjection $S\to C$, the composite $S\to X$ merely factor through a finite type, so the map $C\to X$ merely factors through the quotient of a finite type by a discrete equivalence relation. We conclude by \Cref{factorisation-finite-discrete-quotient}.
\end{proof}

\begin{proposition}
Discrete sets are $\I$-local.
\end{proposition}

\begin{proof}
Let $X$ be a discrete set with a map $f:\mathbb{I}\to X$, we need to factor $f$ through $1$. We conclude by \Cref{compact-hausdorff-discrete-quotient-finite-factorisation} and the fact that any map $\I\to \mathrm{Fin}(k)$ is constant.
\end{proof}

\begin{lemma}
A Stone space is discrete if and only if it is finite.
\end{lemma}

\begin{proof}
Let $S$ be a discrete Stone space. Its identity types are discrete closed proposition therefore decidable. By factoring the identity we get a surjection from a finite type to $S$. Therefore $S$ is a quotient of a finite type by a decidable equality relation, therefore finite. 
\end{proof}

\begin{remark}
\rednote{Out of place?}. Using $\Noo$ to define closed subset of say $1$ doesn't work (i.e. a subset $X$ is closed if $X$ is stable by limit of convergent sequence), consider e.g. $U$ open proposition subset of $1$.
\end{remark}


\subsection{Stability by quotients}

\begin{lemma}
Let $Y$ be a set with discrete identity type with a surjection $X\twoheadrightarrow Y$ where $X$ is a discrete type. Then $Y$ is discrete.
\end{lemma}

\begin{proof}
Let $S$ be Stone with a map $S\to Y$. By local choice we get:
 \begin{center}
\begin{tikzcd}
S'\ar[r,"i"]\ar[d,"p"] & X\ar[d] \\
S\ar[r] & Y\\
\end{tikzcd}
\end{center}
The top map merely factors through a finite type, so the bottom map merely factor through the quotient of a finite type by the discrete equivalence relation induced identity in $Y$. Then we conclude by \Cref{factorisation-finite-discrete-quotient}.
\end{proof}

\begin{corollary}\label{prop-set-truncation-discrete}
Let $X$ be a discrete type, then the propositional and set truncation of $X$ are discrete.
\end{corollary}

\begin{lemma}\label{discrete-continuity-dependent}
Assume $(S_k)_{k:\N}$ a tower of finite type and $P(x)$ discreet for $x:S_0$. Then the canonical map:
\[\mathrm{colim}_k\prod_{x:S_k}P(x_0) \to \prod_{x:\mathrm{lim}_kS_k}P(x_0)\]
is an equivalence.
\end{lemma}

\begin{proof}
Through commutation of sequential limit with finite sums, and of sequential colimit with finite product, we can assume $S_0 = 1$. Then $P$ is constant and this is just the definition.
\end{proof}

\begin{lemma}\label{discrete-identity-embedding}
Let $Y$ be a type with discrete identity types. Then for any tower of finite type $(S_k)_{k:\N}$, the canonical map:
\[\mathrm{colim}_kY^{S_k} \to Y^{\mathrm{lim}_kS_k}\]
is an embedding.
\end{lemma}

\begin{proof}
Essentially we apply \Cref{discrete-continuity-dependent} to identity type in $Y$. \rednote{TODO: details}
\end{proof}

%\begin{lemma}\label{higher-quotient-finite-discrete-discrete}
%Let $Y$ be a type with discrete identity types and $k:\N$ with a surjection $\mathrm{Fin}(k)\to Y$. Then $Y$ is discrete.
%\end{lemma}

%\begin{proof}
%We proceed by induction on $k$. By local choice we get:
% \begin{center}
%\begin{tikzcd}
%S'\ar[r,"i"]\ar[d,"p"] & \mathrm{Fin}(k)\ar[d] \\
%S\ar[r] & Y\\
%\end{tikzcd}
%\end{center}
%For all $l,l'<k$, consider the Stone space:
%\[T_{l,l'} = \Sigma_{x,y:S'}p(x)=p(y)\land i(x) = l \land i(y) = l'\] 
%Then $T_{l,l'}\to \propTrunc{i(x)=_Yi(y)}$. By \Cref{prop-set-truncation-discrete} we have that $\neg T_{l,l'} \lor \propTrunc{i(x)=_Yi(y)}$. If for all $l\not=l'$ we have $\neg T_{l,l'}$ we can conclude as $i$ factors through $S$ \rednote{NO this doesn't work, this doesn't mean the original map factors through a finite type.}
%\end{proof}

%\begin{proposition}
%Let $Y$ be a type with discrete identity types and a surjection $X\twoheadrightarrow Y$ with $X$ discrete. Then $Y$ is discrete. 
%\end{proposition}

%\begin{proof}
%We just need to prove that for any $S$ Stone, any map $S\to Y$ merely factors though a finite type. Given such a map use local choice to get:
% \begin{center}
%\begin{tikzcd}
%S'\ar[r,"i"]\ar[d,"p"] & X\ar[d] \\
%S\ar[r] & Y\\
%\end{tikzcd}
%\end{center}
%The top map merely factors through a finite type, so the bottom merely factors through the image of a finite type in $Y$. Then we conclude by \Cref{higher-quotient-finite-discrete-discrete}.
%\end{proof}


\subsection{Future work}

Questions:
\begin{itemize}
\item If $S$ is Stone and $A$ is a discrete abelian group, do we have $H^1(S,A) = 0$? 
\item What about higher cohomology groups? 
\item What about $H^1(\I,A)$? 
\item Is any discrete type $\I$-local? 
\item Do we have that discrete and overt sets are the same as overtly discrete sets?
\item What about stability by quotient?
\end{itemize}