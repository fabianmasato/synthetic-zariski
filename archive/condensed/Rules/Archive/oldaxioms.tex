


\begin{corollary}
  In particular, the non-dependent version of the above axiom gives 
  us countable choice:
  For any predicate on natural numbers $P$, we have 
  \begin{equation}
    \forall_{n:\N} ||P(n) ||
    \leftrightarrow 
    || \forall_{n:\N} P(n) ||
  \end{equation}
\end{corollary}

\subsection{First consequences}
\rednote{Messing with the order} 
\subsubsection{Consequences of Stone duality}
\begin{remark}\label{SpIsAntiEquivalence}
Stone types will take over the role of affine scheme from \cite{draft}, 
and we repeat some results here. 
Analogously to Lemma 3.1.2 of \cite{draft}, 
for $X$ Stone, Stone duality tells us that $X = Sp(2^X)$. 
%
Proposition 2.2.1 of \cite{draft} now says that 
$Sp$ gives an equivalence 
\begin{equation}
   Hom_{\Boole} (A, B) = (Sp(B) \to Sp(A))
\end{equation}
Therefore $\isSt$ is a proposition.
Equivalently, 
%By Definition 4.6.1 %defines an embedding 
%of \cite{hott}, 
this means that 
$Sp$ is an embedding from $\Boole$ to any universe of types.
Its image, $\Stone$ also has a natural category structure.
By the above and Lemma 9.4.5 of \cite{hott}, 
the map $Sp$ defines a dual equivalence of categories between $\Boole$ and $\Stone$.
\end{remark}


\rednote{Active}
\begin{lemma}\label{BoolePushouts}
  Countably presented Boolean algebras are closed under pushout. 
\end{lemma} 
\begin{proof}
  Let $A,B,C:\Boole$, and suppose $f:A\to B, g:A \to C$ are Boolean morphisms. 
  Let $G_A,G_B,G_C$ be the underlying countable sets of generators for $A,B,C$ and 
  let $R_B,R_C$ be the underlying countable sets of relations. 
  Consider $P$ the Boolean algebra generated by $G_B\sqcup G_C$ under the relations 
  $R_B\cup R_C \cup F$ where $F$ is the set of expressions $f(a)-g(a)$ for $a$ ranging over $G_A$. 
  
  Note that as the generators of $B$ are included in those of $P$, 
  and all relations of $B$ are included in those of $P$, there is a map $h:B\to P$. 
  Similarly there is a map $i:C\to P$. 
  We now claim that the following is a pushout square:
  \begin{equation}\begin{tikzcd}
    A \arrow[r,"f"] \arrow[d,"g"] & B \arrow[d,"h"]\\
    C \arrow[r,"i"] & P
  \end{tikzcd}\end{equation}  
  Suppose $\beta:B \to X, \gamma:C\to X$ are such that $\beta\circ f = \gamma \circ h$. 
  $\beta,\gamma$ then induce maps on the generators of $P$. 
  These maps respect $F$ as $\beta\circ f=\gamma\circ h$, and they must respect $R_B,R_C$ as they are maps out of $B,C$. 
  Therefore, $\beta,\gamma$ induce a map $e:P\to X$, such that 
  $e(b) = \beta(b)$ for $b:G_B$ and $e(c)=\gamma(c)$ for $c:G_C$. 
  Furthermore, any map $P\to X$ with this property must agree with $e$ on all the generators of $P$, 
  and therefore equal $e$. Thus $e$ is the unique extension $P\to X$. 
  Thus $P$ the above square is indeed a pushout. 
\end{proof}
\begin{corollary}
  By \Cref {SpIsAntiEquivalence} and the above lemma, Stone spaces are closed under pullbacks. 
\end{corollary}


\begin{lemma}\label{SpectrumEmptyIff01Equal}
  For $B:\Boole$, we have $0=_B1$ iff $\neg Sp(B)$.
\end{lemma}
\begin{proof}
  Note that whenever $0=1$ in $B$, there is no map $B\to 2$ respecting both $0$ and $1$ as $0\neq 1$ in $2$. 
  Thus $\neg Sp(B)$ whenever $0=1$ in $B$. 
  % 
  Conversely, if $\neg Sp(B)$, then $Sp(B) = \emptyset$, which is also the spectrum of the trivial Boolean algebra. 
  As $Sp$ is an embedding, $B$ is equivalent to the trivial Boolean algebra, and $0=_B1$. 
\end{proof}

Now we can present an equivalent formulation to axiom 2. 
\begin{lemma}
  TFAE:
  \begin{enumerate}[(i)]
    \item For any Stone space $S$, we have $\neg \neg S \to ||S||$ (Propositional logic is complete).
    \item For $A,B:\Boole$, a map $f:A\to B$ is injective iff the corresponding map $Sp(B) \to Sp(A)$ is surjective
      (Formal surjections are surjections). 
  \end{enumerate}
\end{lemma} 
\begin{proof}
\item \paragraph{Surjections always correspond to injections}
  We first show that whenever $f:A\to B$ is such that the induced map $\tilde f:Sp(B)\to Sp(A)$ is surjective, 
  $f$ is injective. Suppose $\tilde f $ is surjective. 
  Let $a:A$ be such that $f(a)= 0$. 
  By surjectivity of $\tilde f$, for every $x:A\to 2$, there is a $y:B\to 2$ with $y\circ f = x$. 
  Consequentely $x(a) = y(0) = 0$. So $x(a) = 0$ for every $x:Sp(A)$. 
  Thus $Sp(A) = Sp(A/\{a\})$, and as $Sp$ is an embedding, $A \simeq A/\{a\}$, and $a = 0$ in $A$. 
  So whenever $f(a) = 0$, we have $a=0$ and $f$ is injective. 


\item \paragraph{If propositional logic is complete, injections correspond to surjections}
  Suppose that for all Stone spaces $S$ we have $\neg \neg S\leftrightarrow ||S||$. 
  Let $f:A\to B$ be injective. We shall show that the induced map $\tilde f: Sp(B) \to Sp(A)$ is surjective. 
  Let $x:Sp(A)$
%  We shall show that for any $x:Sp(A)$ there merely exists some $y:Sp(B)$ with $ \tilde f (y) = x$. 
  Note that we have the following pullback square in the category of Stone spaces:
  \begin{equation}\begin{tikzcd}
    \sum\limits_{y:Sp(B)} \tilde f y = x \arrow[d] \arrow[r] \arrow["\lrcorner"{pos=0.125}, phantom, dr] 
    & 1 \arrow[d,"x"]\\
    Sp(B) \arrow[r,"\tilde f"] & Sp(A)
  \end{tikzcd}  \end{equation}
  In particular, $\sum\limits_{y:Sp(B)} \tilde f y = x$ is Stone, and to show that it is merely inhabited, 
  our assumption tells us we can show its double negation. 
  Consider the dual to the above square in the category of countably presented Boolean algebras:
  \begin{equation}\begin{tikzcd}
    A \arrow[d,"x"'] \arrow[r,hook,"f"] \arrow[rd,phantom,"\ulcorner"{pos=0.125}] & B\arrow[d]\\
    2 \arrow[r] & P
  \end{tikzcd}\end{equation}  
  Where $Sp(P) \simeq  (\sum\limits_{y:Sp(B)} \tilde f y = x)$. 
  We are thus left by showing that $\neg \neg Sp(P)$. By \Cref{SpectrumEmptyIff01Equal}, 
  we can do this by showing that $0\neq_P 1$. 
  \begin{itemize}
    \item 
  Recall from \Cref{BoolePushouts} that the generators of $P$ are those of $B$ and $2$, and as $2$ has no generators, 
  the generators of $P$ are those of $B$. 
    \item 
  Furthermore, relations from $P$ come from relations from $B$ and $2$, 
  and those of the form $f(a) - x(a)$ for $a:A$.
  Recall that $2$ has no relations. Also, 
  note that $x(a)= 0 \vee x(a) = 1$ for all $a:A$, as $x(a):2$. 
  If $x(a)=0$, then $f(a)-x(a)=f(a)$. 
  If $x(a)=1$, then $f(a)-x(a) = f(a)-1= \neg f(a)$
  Now $f(a)=0$ iff $\neg f(a) = 1$. 
  So the generators of the form $f(a)-x(a)$ for $a:A$ are of the form $f(a)$ those $a:A$ with $x(a) = 1$. 

  \end{itemize} 
  Thus $P = B/\{f(a)|x(a)=0\}$. 
  This means that two elements $b,b':B$ become equal in $P$ iff 
  $b-b' \leq \bigvee_{a:A_0} f(a)$ for some finite $A_0 \subseteq \{f(a)| x(a) = 0\}$. 
  For such $A_0$, we have that $x(\bigvee_{a:A_0} a ) = 0$ as well. 
  Thus $b-b' \leq  f(a')$ for some $a'$ with $x(a') =0$. 

  Thus $0=_P 1$ iff $1 = 1 -0 = f(a)$ for some $a:A$ with $x(a) = 0$. 
  As $f$ is injective, $f(1) = 1$ iff $a=1$, in which case $x(a) = 1$. 
  But as $0\neq_2 1$, this is a contradiction. 
  Therefore $0\neq_P 1$, as required. 

\paragraph{Assuming surjections are formal surjections, propositional logic is complete}
%\begin{lemma}\label{LemSurjectionsFormalToCompleteness}
% For $S:\Stone$, we have that $\neg \neg S \to || S ||$
%\end{lemma}
%\begin{proof}
  Assume that surjections are formal surjections. 
  Let $B:\Boole$ and suppose $\neg \neg Sp(B)$. 
  We then have $0\neq 1$ in $B$. 
  %Note that if $0=1$ in $B$, then $Sp(B) =\emptyset$, meaning $\neg Sp(B)$. 
  %Therefore, we have $0\neq 1$ in $B$. 
  It follows that the unique map $f:2\to B$ is injective. 
%  Let $f:2 \to B$, note that if $f(0) = f(1)$ then $0=1$ in $B$, 
%  If $0=1$ in $B$, there are no maps $B\to 2$ preserving $0$ and $1$, thus $\neg Sp(B)$. 
%  This is a contradiction with $\neg \neg Sp(B)$. Thus we may conclude that $f(0)\neq f(1)$. 
%  Hence by case distinction on $2$ we can show $f$ we have that $f x = f y$ implies $ x= y$. Thus 
 % $f$ is injective 
  Thus the map $Sp(B) \to Sp(2) = 1$ is surjective, thus $Sp(B)$ is merely inhabited. 
%\end{proof} 

\end{proof}
 


\begin{lemma}
  Local choice is equivalent to the statement that whenever 
  we have a surjection  between arbitrary types $e:E \twoheadrightarrow F$  and  
  a map $f:S\to F$, there exists a cover $T\twoheadrightarrow S$ and an arrow $T\to E$ making the following diagram commute:
    \begin{equation}\begin{tikzcd}
      T \arrow[d,dashed, two heads ] \arrow[r,dashed]&  E \arrow[d,""',two heads, "e"]\\
      S  \arrow[r, "f"] & F
    \end{tikzcd}\end{equation}  
\end{lemma}
\begin{proof}
  First, note that surjections are stable under pullback.
  Whenever $s:S$, we there merely exists some $b:E$ with $e(b) = f(s)$. 
  This induces an element $(s,b):S\times_F E$. 
  Thus the projection $S\times_F E \to S$ is surjective, and 
  the above axiom provides us with a $T$ as required. 
    \begin{equation}\begin{tikzcd}
     & S \times_F E \arrow[r] \arrow[d,two heads] &  E \arrow[d,""',two heads, "e"]\\
       T \arrow[r, two heads ,dashed ] \arrow[ru,dashed]& 
       S  \arrow[r, "f"] & F
    \end{tikzcd}\end{equation}  
    
    Conversely, by considering $f=id$ we can see the statement of the lemma implies local choice. 
\end{proof}



In SAG, we deal with a fixed commutative ring $R$. For this project, the role of $R$ is taken over by 
the Boolean algebra $2 = 1+1$. Note that we don't need to postulate an alternative for the \textbf{Loc} axiom. 
We write $\Boole$ the type of countably presented Boolean algebras.
Note that as each Boolean algebra is a Set, we $\Boole$ is a subtype of $hSet$.
Also, as being countable is a notion independent of universes, $\Boole$ is independent of universes.
Finally, note that $\Boole$ has a natural category structure. 

Any Stone set has a natural topology, where basic opens are decidable subsets.

\medskip

\begin{proposition}
Any map $f: Sp(B)\rightarrow\N$ is uniformely continuous.
\end{proposition}  

\begin{proof}
  For each natural number $n$, the fiber $f^{-1}(n)$ is a decidable
  subset of $Sp(B)$. Via the isomorphism $B\rightarrow 2^{Sp(B)}$, this corresponds to an element $e_n$ of $B$. We have
  $e_ne_m = 0$. Furthermore the quotient $B'$ of $B$ by the relations $e_n = 0$ is such that $Sp(B') = 0$ and hence
  $1 = 0$ in $B'$, so we have $N$ such that $1 = \vee_{i<N}e_i$.
\end{proof}

\medskip

In formal/point-free topology, we consider that a Boolean algebra $B$ represents a Stone space $Sp(B)$ and a map
$Sp(B') \to Sp(B)$ is represented by a map $B\rightarrow B'$; the map $Sp(B')\to Sp(B)$ is then said to be
{\em formally surjective} if the corresponding map $B\to B'$ is injective. In the topos of light condensed sets,
this becomes a true duality.

\begin{proposition}\label{PropMarkov}
Markov's Principle holds, if we have $\neg \forall_n\alpha(n) = 0$ then we have $\exists_n \alpha(n) = 1$.
\end{proposition}

\begin{proof}
  Let $B$ be the Boolean algebra presented by $\alpha(n)$. We have $Sp(B) = \emptyset$ and hence by duality
  $B$ is trivial, which means that we have $n$ such that $\alpha(n) = 1$.
\end{proof}


Another way to state this axiom is that epimorphisms in the category $\Stone$ are exactly the surjective maps.

Yet another formulation is $(\neg \neg X)\rightarrow \propTrunc{X}$ for $X$ Stone space. If we think of an algebra
in $\Boole$ as a proposition theory, this expresses a form of {\em completness}: any non inconsistent theory has
a model. 

\medskip

An example of a surjective map (since it is an epimorphism, since it corresponds to a monomorphism via the anti-equivalence
between $\Stone$ and $\Boole$) is the map sum of the maps $\Noo\rightarrow \Noo$ sending $n$ to $2n$ (resp. $n$ to $2n+1$).
This map has no section. This shows that $\Noo$ is not projective.

Here is another way to formulate this result.

\begin{proposition}
  LLPO is a consequence of Axioms $1$ and $2$.
\end{proposition}

Conversely, {\em with} Dependent Choice, LLPO implies Axiom 2, since it implies completeness of propositional logic.
\rednote{Active here}
\rednote{See \Cref{LLPOAndDCToCompleteness}}
A consequence of this characterisation of surjective maps is the following.

\begin{proposition}
  The image of any map between two Stone types is Stone.
\end{proposition}

Here is an example showing how to use this axiom. A closed subset of a Stone set is given by a countable
intersection of decidable subset.

\begin{proposition}
  Let $f:X'\rightarrow X$ a surjective map and $F_n$ a decreasing sequence of closed subsets of $X'$ such that
  each restriction $f_{|F_n}$ is surjective. Then if $F = \cap_n F_n$ the restriction $f_{|F}$ is still surjective.
\end{proposition}

\begin{proof}
  Dually, we have an injective map $i:B\rightarrow B'$ with an increasing sequence $I_n$ of ideals of $B'$ such that
  $b = 0$ if $i(b) = 0$ mod. $I_n$. The subset $F$ corresponds to the ideal $I = \cup_n I_n$. If $i(b) = 0$ mod. $I$
  then we have $i(b) = 0$ mod. $I_n$ for some $n$ and $b = 0$. 
\end{proof}



One basic result about the category $\Boole$, the existence of retraction for non empty closed subset inclusion
holds only {\em non} constructively and in our setting we can prove the following.


\begin{proposition}
 It is not the case that for all closed proposition $p$ the inclusion $1+p\rightarrow 1+1$ has a retraction.
\end{proposition}

\begin{proof}
  This implies that all closed propositions are decidable and the proposition $x=\infty$ for $x$ in $\Noo$ is a
  closed proposition which is not decidable.
\end{proof}

\medskip

We can define the set $\Closed$ of closed propositions, where a proposition is closed iff it is equivalent to
the proposition $\forall_n \alpha(n) = 0$ for some $\alpha$ in $2^{\N}$.

\begin{theorem}
  Monomorphisms in $\Stone$ are classified by $\Closed$.
\end{theorem}

\medskip

We have seen that $\Noo$ is not projective. Using Local and Dependent Choice, David Wärn noticed that Scholze's argument
about $\ints[\Noo]$ cannot be made internal.

\begin{theorem}
   $\ints[\Noo]$ is {\em not} projective in the category of Abelian Groups.
\end{theorem}
